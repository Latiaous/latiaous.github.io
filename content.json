{"pages":[],"posts":[{"title":"第一篇文章,还有hexo遇到的问题","text":"​ 其实本来1个小时就能搭完的，结果还是遇到了一些（和技术完全不相关的）问题，总体来说还挺有意思的，虽然我应该不会深入去学node.js，至少现在。 ​ 参考的是知乎上的文章，不过，遇到问题翻了翻之后发现大部分教程的内容其实都差不多。然后也没有我遇到的弱智问题。 ​ 嗯，弱智问题。node和hexo的版本不适配的问题，大体上博客都会教你用 1npm i hexo-cli -g ​ 来先安装上hexo，这里还没问题，但是你获得的是hexo的最新版，如果你的教程不幸直接给了你一个node.js的下载链接或者你也是个把低版本写入DNA的倒霉java程序员，你很可能获得一个console错误。 12345 console.js:39throw new ERR_CONSOLE_WRITABLE_STREAM('stdout');^TypeError [ERR_CONSOLE_WRITABLE_STREAM]: Console expects a writable stream instance for stdout ​ 大概就是上文那样，然后你面向百度还找不到怎么改，实属低级错误。 ​ 所以请务必去hexo的网站：https://hexo.io/zh-cn/ 学习搭建，虽然文章的顺序有些不太合适于学习，但是至少不会出问题，比方说你现在需要用 1$ hexo server ​ 来启动测试服务器而不是用g编译或者去找什么server模块。 ​ 文章开头的块必须yaml模式之类的…… ​ ​ 总之，这样这个小破站就算开业了。希望能长命百岁吧。","link":"/2020/09/05/%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0-%E8%BF%98%E6%9C%89hexo%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"},{"title":"第一个计划","text":"​ 思考了一下该做什么，虽然从最开始就订好了，打算先从简单的做起，做一个签到用的东西。 ​ 话是这么说其实我脑子里一点思路都没有，所以打算一边写一边想。 ​ 人脸识别我做不到，刷卡……我也不清楚嵌入式怎么做的。所以想单纯的把前端做成一个传递姓名或者id的东西。总之就是个身份信息，不管通过什么方法，发送一个uri/{id}类的东西给后端进行处理。然后后端就可以记录这个人是谁，什么时候到的，至于记录，还是放在redis里比较好吧，毕竟一天内频繁创建。具体就是一个set，key就用”date+am/pm/ev+up/down/“这样，里面存放职员的id。key的格式就是“日期+上下午晚+出勤下班”，这样应该挺清楚的。不过这样的话我也想支持只有白班和晚班或者只有白班的格式，不知道能不能通过设置一键切换。不过最开始想现在只有白班的情况，比较简单。 ​ 接着果然还是要有一个后台，想要显示当日出勤的页面，果然还是要有事假按钮。然后查询一个人当月的出勤记录，3个月内的出勤状态。然后还想要用poi打印对应的表格输出，用echart显示饼图。挺不错的。 ​ 具体能查一个月，用redis就很麻烦了，突然想到集合用个人做key……嘶，不行，实在不行。每天最后用mysql持久化？我的想法是这样的，能查询一个人这个月和上个月的详细出勤记录，状态，上下班时间，然后可以查询以前的不包含时间，只包含状态的记录……怎么做呢？ ​ 每月的状态确实可以用Mysql，我是这样想的，表结构是id，职员id，月份，varchar出勤字符串，0正常，1迟到，2早退，3旷工，4正常休假，5事假，然后拼成一个000000100003这样的字符串，最后再去处理。毕竟，很短…… ​ 对了，如果我觉得每月查人很烦的话，为什么不多作一个每月的人的记录呢？redis的Zset也是组合实现……如果空间足够并不是问题。key的话“月+职员id”用zset，权重可以直接用日，每人都有两个Zset用来处理当月和上个月。 ​ 那么实际就是这样，一个人登录，先检索数据库该人是否是职工，是职工，检查一下时间，根据什么判断一下是正常，迟到，早退，旷工。然后放进当日集合和个人集合。 ​ 比较怪的应该是旷工，感觉需要计时器来定时计算比方说上午9点出勤，10点以后就统计旷工。然后还有一个每一个月把上上个月个人情况转换为sql记录的东西。 ​ 总体的流程就是这样，具体的话，先写写再说了。 ​ 名字的话Cronus如何？和时间相关的假面骑士挺好的……毕竟签到算是反派，不用电王了233。","link":"/2020/09/06/%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%AE%A1%E5%88%92/"}],"tags":[{"name":"测试","slug":"测试","link":"/tags/%E6%B5%8B%E8%AF%95/"},{"name":"hexo","slug":"hexo","link":"/tags/hexo/"},{"name":"练习","slug":"练习","link":"/tags/%E7%BB%83%E4%B9%A0/"},{"name":"项目设计","slug":"项目设计","link":"/tags/%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1/"}],"categories":[]}